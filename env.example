# .env.example — Configuration MDNT Construction

## API Integrations

# n8n Webhook URL pour contact form
NEXT_PUBLIC_N8N_WEBHOOK=https://your-n8n-instance.com/webhook/contact

# Admin Password (défaut: 1234)
ADMIN_PASSWORD=1234

## Optional: Future Integrations

# Google Analytics
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX

# Supabase (pour future DB)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# Email Service (Resend)
RESEND_API_KEY=your-resend-key

# Database
DATABASE_URL=postgresql://user:password@localhost:5432/mdntconstruction

---

# README — Setup Configuration

## 1. Copier fichier .env

```bash
cp .env.example .env.local
```

## 2. Remplir les variables

### REQUIRED

**NEXT_PUBLIC_N8N_WEBHOOK**

Créer webhook n8n pour form contact :

```
https://your-n8n-instance.com/webhook/contact
```

Body format:
```json
{
  "name": "...",
  "email": "...",
  "phone": "...",
  "subject": "...",
  "message": "...",
  "service": "cuisine|escalier|agencement"
}
```

**ADMIN_PASSWORD**

Défaut: `1234` (à changer en production)

### OPTIONAL

Pour future implémentation (DB, email, analytics)

## 3. Vérifier .env.local dans .gitignore

```bash
# .gitignore
.env.local
.env.*.local
```

⚠️ **NE PAS** commiter .env.local sur GitHub !

---

# Deployment — Variables Vercel

### 1. Dashboard Vercel

```
Settings → Environment Variables
```

### 2. Ajouter variables

```
NEXT_PUBLIC_N8N_WEBHOOK = https://...
ADMIN_PASSWORD = 1234
```

### 3. Déployer

Redéployer pour activer variables:

```bash
git push origin main
# → Vercel redéploie auto
```

---

# Sécurité

## .env.local (Development)

```
git update-index --skip-worktree .env.local
```

Évite commits accidentels

## Vercel (Production)

- Variables are encrypted at rest
- Accessible only at build/runtime
- NEVER log à la console en prod

---

# Troubleshooting

## "NEXT_PUBLIC_N8N_WEBHOOK is undefined"

```bash
# Vérifier:
1. Fichier .env.local existe
2. Clé est correctement écrite
3. Redémarrer dev server (npm run dev)
```

## Admin login ne fonctionne pas

```bash
# Vérifier:
1. ADMIN_PASSWORD dans .env.local
2. Cookie stocké dans localStorage
3. Refresh page après login
```

---

# Production Checklist

- [ ] .env.local créé locally
- [ ] NEXT_PUBLIC_N8N_WEBHOOK configuré
- [ ] Variables Vercel ajoutées
- [ ] .env.local dans .gitignore
- [ ] Tests login admin (password: 1234)
- [ ] Tests contact form → n8n webhook
- [ ] Lighthouse audit > 90
- [ ] Deploy Vercel réussi

---

**Created**: 20/02/2026
